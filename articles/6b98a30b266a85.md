---
title: "【Go】httprouterのGlobalOptionsを使ってCORSを学んでみた"
emoji: "😎"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Golang, CORS]
published: false
---
# これは何
Goのhttprouterの使い方を見ていたら、`GlobalOPTIONS`という変数を使ってpreflight requestに対してヘッダをつけられることを知りました。
これを使ってCORSに関する理解を深めたいなーと思ったので記事にします。
# この記事のゴール
- httprouterパッケージの使い方を理解する
- CORSの目的と仕組みを（ざっくり）理解する
# 結論
# CORSについて
CORSはオリジン間リソース共有（Cross Origin Resource Shearing）の頭文字をとったものです。
異なるオリジンにあるリソースにアクセスする際に、アクセスを許可するか否かを決める仕組みです。
## オリジンとは
そもそもオリジンとは何なのかというと
- スキーム
- ドメイン
- ポート

の3つを合わせたものをオリジンといいます。
例えば、`http://example.com:80/hoge/fuga.html`というURLがあったとすると。
httpが`スキーム`、example.comが`ドメイン`、80が`ポート`です。
`hoge/fuga.html`の部分はパスなので関係ないです。
## CORSを使う目的
CORSを使う目的は、異なるオリジンにあるリソースにアクセスを許可することです。
なぜわざわざ許可するのかというと、リソースをFetchする時には`同一オリジンポリシー`というポリシーがあるためです。
### 同一オリジンポリシー

## リクエストヘッダの役割
## レスポンスヘッダの役割
# httprouter
httprouterはリクエストのルーティングを行ってくれるGoのパッケージです。
基本的な使い方はREADMEを参照してください。
https://github.com/julienschmidt/httprouter
本記事ではその中でも、`GlobalOptions`という`OPTIONS`メソッドに対する処理を実装できる機能を取り上げます。
## GlobalOptions
# 実験してみる
## 模擬的なPreflight request
### リクエストヘッダ
### レスポンスヘッダ