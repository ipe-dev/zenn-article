---
title: "【Go】Handle?Handler?HandlerFunc?HandleFunc?ややこしいのでまとめてみた"
emoji: "🗂"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Golang]
published: false
---
# これは何
Goのhttpパッケージについて勉強していたときのこと。
**「Handle、Handler、HandlerFunc、HandleFuncって名前ややこしすぎん？何が違うの？」** と思ったのでそれぞれの違いをまとめたものです。
# この記事のゴール
- Handle、Handler、HandlerFunc、HandleFuncの違いを理解する。
# 結論
- HandleFuncはパスと処理内容を関連づけている。
- HandlerFuncは`func(ResponseWriter, Request)`を表す型でHandlerを実装している
- Handlerは
- Handleは
# HandleFunc
HandleFuncは以下のように使うことができます。
```go
http.HandleFunc("/HandleFunc", func(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "handle func")
})
```
第一引数にパス、第二引数に`func(w http.ResponseWriter, r *http.Request)`のシグネチャを持つ関数を受け取ります。
また、シグネチャが同じであれば関数を渡すことも可能です。
```go
func hoge(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "handle func")
}
func main() {
    http.HandleFunc("/HandleFunc, hoge)
}
```
以下はhttpパッケージに実装されているHandleFunc関数です。
```go
func HandleFunc(pattern string, handler func(ResponseWriter, *Request)) {
	DefaultServeMux.HandleFunc(pattern, handler)
}
```
パスのパターンとハンドラを受け取って`マルチプレクサ`に登録します。
これによりパスとハンドラが関連づけられています。
# HandlerFunc
HandleFuncに似た名前のものに`HandlerFunc`があります。
これの実装を見てみます。
```go
type HandlerFunc func(ResponseWriter, *Request)

// ServeHTTP calls f(w, r).
func (f HandlerFunc) ServeHTTP(w ResponseWriter, r *Request) {
	f(w, r)
}
```
HandleFuncは関数だったのに対し、`HandlerFunc`は型です。
よく考えてみれば、Handleという**動詞**とHandlerという**名詞**なので品詞で区別するとわかりやすいかもしれません。
また、`ServeHTTP`メソッドを実装しているので、`Handlerインターフェース`（後述）を満たしています。
`ServeHTTP`が実行されると自身の関数が実行されるようになっています。
# Handler 
httpパッケージにおける`Handler`はServeHTTPを持つインターフェースです。
```go
type Handler interface {
	ServeHTTP(ResponseWriter, *Request)
}
```