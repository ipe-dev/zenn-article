---
title: "ã€ubuntuã€‘Dockerã§systemctlã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹"
emoji: "ğŸ§"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [Linux, ubuntu]
published: true
---
ubuntuã®å…¬å¼ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸã ã‘ã ã¨systemctlãŒä½¿ãˆãªã‹ã£ãŸã®ã§ã€ä½¿ãˆã‚‹æ–¹æ³•ã‚’è¨˜è¿°ã—ã¾ã™ã€‚
# Dockerfileã‚’ç”¨æ„

```dockerfile
FROM ubuntu:22.04

RUN apt-get update \
&& apt-get install -y init systemd
```
`apt-get install -y init systemd`ã§systemdã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã—ã¦ã„ã¾ã™

# docker-compose.ymlã‚’ç”¨æ„
```yaml
services:
    init-ubuntu: 
      container_name: my-init-ubuntu
      build:
        context: .
        dockerfile: dockerfile
      privileged: true
      command: /sbin/init
```
`privileged=true`ã¨ã™ã‚‹ã“ã¨ã§ç‰¹æ¨©ãƒ¢ãƒ¼ãƒ‰ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã€ãƒ›ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ã«å¯¾ã™ã‚‹å…¨ã¦ã®æ¨©é™ã‚’ä¸ãˆã¾ã™ã€‚
`command: /sbin/init`ã§ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•æ™‚ã«initãƒ—ãƒ­ã‚»ã‚¹ã‚’èµ·å‹•ã—ã¦ãŠãã¾ã™ã€‚

# ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ç¢ºèª
```bash
docker-compose up -d
docker-compose exec init-ubuntu bash
systemctl status
```
`systemctl status`ã‚³ãƒãƒ³ãƒ‰ã§çŠ¶æ…‹ã‚’ç¢ºèªã—`State: running`ã«ãªã£ã¦ã„ã‚‹ã®ã‚’ç¢ºèªã—ã¾ã™ã€‚